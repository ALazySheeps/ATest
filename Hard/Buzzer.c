//这是一个测试蜂鸣器播放音乐的代码，包含了多首歌曲
#include "Buzzer.h"

int melody[] = {50, 50, 50, 50, 200, 200, 200, 400, 400, 500, 500, 500};



void Sound(uint16_t frq)
{
	uint32_t time;
	if(frq != 1000)
	{
		time = 500000/((uint32_t)frq);
		Buzzer_ON();
		CPU_TS_Tmr_Delay_US(time);
		Buzzer_OFF();
		CPU_TS_Tmr_Delay_US(time);
	}else
		CPU_TS_Tmr_Delay_US(1000);
}
void Sound2(uint16_t time)
{
    Buzzer_ON();
    CPU_TS_Tmr_Delay_MS(time);
    Buzzer_OFF();
    CPU_TS_Tmr_Delay_MS(time);
}
void play_successful(void)
{
    int id=0;
    for(id = 0 ;id < 12 ;id++)
    {
        Sound2(melody[id]);
    }
}
void play_failed(void)
{
    int id=0;
    for(id = 11 ;id >=0 ;id--)
    {
        Sound2(melody[id]);
    }
}
void play_music(void)
{
	//              低7  1   2   3   4   5   6   7  高1 高2 高3 高4 高5 不发音
	uint16_t  tone[] = {247,262,294,330,349,392,440,294,523,587,659,698,784,1000};//音频数据表
	//红尘情歌
//	uint8_t  music[]={5,5,6,8,7,6,5,6,13,13,//音调
//                5,5,6,8,7,6,5,3,13,13,
//                2,2,3,5,3,5,6,3,2,1,
//                6,6,5,6,5,3,6,5,13,13,

//                5,5,6,8,7,6,5,6,13,13,
//                5,5,6,8,7,6,5,3,13,13,
//                2,2,3,5,3,5,6,3,2,1,
//                6,6,5,6,5,3,6,1,	

//                13,8,9,10,10,9,8,10,9,8,6,
//                13,6,8,9,9,8,6,9,8,6,5,
//                13,2,3,5,5,3,5,5,6,8,7,6,
//                6,10,9,9,8,6,5,6,8};	
//	uint8_t  time[] = {2,4,2,2,2,2,2,8,4, 4, //时间
//                2,4,2,2,2,2,2,8,4, 4, 
//                2,4,2,4,2,2,4,2,2,8,
//                2,4,2,2,2,2,2,8,4 ,4, 

//                2,4,2,2,2,2,2,8,4, 4, 
//                2,4,2,2,2,2,2,8,4, 4, 
//                2,4,2,4,2,2,4,2,2,8,
//                2,4,2,2,2,2,2,8,

//                4, 2,2,2, 4, 2,2,2, 2,2,8,
//                4, 2,2,2,4,2,2,2,2,2,8,
//                4, 2,2,2,4,2,2,5,2,6,2,4,
//                2,2 ,2,4,2,4,2,2,12};	
    //小燕子
//		uint8_t music[]={3,5,8,6,5,13,//音调
//	                3,5,6,8,5,13,
//	                8,10,9,8,9,8,6,8,5,13,
//					3,5,6,5,6,8,9,5,6,13,
//					3,2,1,2,13,
//					2,2,3,5,5,8,2,3,5,13};
//		uint8_t time[] ={2,2,2,2,6,4,//时间  
//				2,2,2,2,6,4,
//                6,2,4,4,2,2,2,2,6,4,
//				6,2,4,2,2,4,2,2,6,4,
//				2,2,4,6,4,
//				4,2,2,4,4,4,2,2,6,4};
//一个提示音
//		uint8_t music[]={1,1,5,5,6,6,5,4,4,3,3,2,2,1,
//                         5,5,4,4,3,3,2,5,5,4,4,3,3,2,
//                         1,1,5,5,6,6,5,4,4,3,3,2,2,1};
//		uint8_t time[] ={1,1,1,1,1,1,2,1,1,1,1,1,1,2,
//                         1,1,1,1,1,1,2,1,1,1,1,1,1,2,
//                         1,1,1,1,1,1,2,1,1,1,1,1,1,2};
        uint8_t music[]={
                  8,9,10};
		uint8_t time[] ={
                     1, 2,2};
	uint32_t  yanshi;
	uint16_t  i,e;
	yanshi = 10;
	for(i=0;i<sizeof(music)/sizeof(music[0]);i++){
		for(e=0;e<((uint16_t )time[i])*tone[music[i]]/yanshi;e++){
			Sound((uint32_t )tone[music[i]]);
		}	
	}
}

